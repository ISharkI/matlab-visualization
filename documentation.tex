%% LyX 2.0.6 created this file.  For more info, see http://www.lyx.org/.
%% Do not edit unless you really know what you are doing.
\documentclass{article}
\setlength{\parindent}{0cm}
\usepackage{fancybox}
\usepackage{calc}
\usepackage{graphicx}

\makeatletter
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Textclass specific LaTeX commands.
\newenvironment{lyxcode}
{\par\begin{list}{}{
\setlength{\rightmargin}{\leftmargin}
\setlength{\listparindent}{0pt}% needed for AMS classes
\raggedright
\setlength{\itemsep}{0pt}
\setlength{\parsep}{0pt}
\normalfont\ttfamily}%
 \item[]}
{\end{list}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% User specified LaTeX commands.
\usepackage{a4wide}

\makeatother

\begin{document}

\title{Matlab Visualization}


\date{University of Stuttgart, 2014}


\author{Jon Schlipf, Michael Mueller, Marc Gauger}

\maketitle
\newpage{}

\tableofcontents{}

\newpage{}
\begin{abstract}
During our Studies at the University of Stuttgart we created a Matlab
Script to visualize the Input of different Signals. This can be used
to verify a correct recording of a signal in an experimental environment
but can also be used to manipulate the signal to display it in different
ways.
\end{abstract}

\section{Introduction}

This software was created to analyze raw signal of all kinds but especially
radio frequency signals. It was developed at the University of Stuttgart
(Germany) during our studies. Therefore besides the authors the University
of Stuttgart is also part of the copyright holders. The Script was
mainly developed for Matlab but can also be used under Octave. For
exceptions see \ref{sub:Exceptions-for-Octave}.


\subsection{Authors, License and Code}
\begin{itemize}
\item Michael Mueller (michael.mueller@sharkarea.net) 
\item Jon Schlipf (schlipf.jon@gmx.net)
\end{itemize}
Furthermore as supervising tutor: 
\begin{itemize}
\item Marc Gauger (Marc.Gauger@inue.uni-stuttgart.de) 
\end{itemize}
This program is distributed under the GPLv2 License which can be found
at 

\begin{center}
\textbf{http://www.gnu.org/licenses/gpl-2.0.html}
\par\end{center}

The Git Repository for this code can furthermore be accessed at 

\begin{center}
\textbf{https://github.com/ISharkI/matlab-visualization.git}
\par\end{center}


\subsection{Version}

Current (07/15/2014) Version of this program is 0.11. So far only
one single channel Signal is supported. 


\subsubsection{Changelog}
\begin{itemize}
\item 0.01 - Created the general structure and simple modules (Supervisor,
Loader, Delay Signal, simplePlot)
\item 0.02 - Created more modules (fourier, fourierBlocks, cutout, highpass,
lowpass, bandpass, energy spectrum, resampling, digital mixing)
\item 0.03 - Changed the interface between the modules
\item 0.04 - Created modules (correlation, plotIQ)
\item 0.1 - Added WebDemo for lessons
\item 0.11 - New versions of modules, new modules (findcorrelation, findsignal)
and a wifi-example
\end{itemize}

\subsection{Exceptions for Octave\label{sub:Exceptions-for-Octave}}

Currently the following exceptions for ``not working'' under Octave
are
\begin{itemize}
\item PowerSpectrum Module - as it refferes to third party Matlab files.
\end{itemize}

\section{Components}

The software consists of three parts 
\begin{itemize}
\item The ``Supervisor'' is the supervising engine and controls the combination
of the modules. It is the only part of this program which can be directly
accessed by the user.
\item The ``Loader'' are modules which convert the input to a usable format. 
\item The ``Modules'' are different modules (e.g. lowpass filter, simple
output) which can be consecutively added and walked through by the
supervisor. They are used to manipulate the signal or display it. 
\end{itemize}
\begin{figure}
\includegraphics[scale=0.3]{macrostructure}

\caption{Macro structure of the program}


\end{figure}



\subsection{Supervisor}

Currently the supervisor is accessed by the following schema
\begin{lyxcode}
visualizeSignal(``inputFileLocation'',~{[}ModuleArray{]},~{[}loaderModuleNumber{]},~{[}SampleRate{]})
\end{lyxcode}
The module array is an array with an finite number of modules the
supervisor will execute consecutiveley in a chain. Therefore the array
has N rows for N Modules. Each row consists out of two parts
\begin{itemize}
\item The first element contains the module number (modifier or output,
mapping can be found below)
\item The following elements contain the parameters for each module. If
no arguments are needed it can be filled up with anything (e.g. zeroes).
Parameters that are not needed by the respective module will just
be ignored.
\end{itemize}
Example:

\[
\left(\begin{array}{ccccc}
2 & 0 & 1 & 0 & 0\\
1 & 0 & 0 & 0 & 0\\
\ldots & \ldots & \ldots & \ldots & \ldots\\
4 & 1 & 0 & 0 & 0
\end{array}\right)
\]


By using the same interface for both module types (output modules
and filters modules), the user can display the output at any point
in the module chain.

If no input file type is given Matlab files will be assumed as input.
Furthermore if no module array is given a ``{[}2 0 1{]}'' will be
assumed. This means the input is just displayed as a time plot in
figure type 1.


\subsection{Loader}

``Loader'' are modules used to import raw data for processing within
the supervisor. Each Loader is designed to import data from a specific
file type. They access the file through its file name or a directory
path.


\subsection{Modules}

The following modules are designed to perform different tasks but
are sharing a common interface. The Module Interface is an single
row array 

\[
\left(\begin{array}{ccc}
\left[P\right] & \left[P_{1}\ldots P_{N}\right]\left[SampleRate\right] & \left[\begin{array}{c}
ValueSignal\end{array}\right]\end{array}\right)
\]


Where 
\begin{itemize}
\item P - describes the amount of arguments passed to the module (second
row is filled with zero) 
\item $P_{1}\ldots P_{N}$ - are the arguments (While N is given in the
beginning of the array as P) 
\item SampleRate is the signal sample rate (time domain) or sample frequency
(frequency domain)
\item ValueSignal - are the signal values
\end{itemize}
This interface is used by the supervisor to call the modules and can
also be accessed manually for debug purposes. 


\section{Available Loader}


\subsection{loadMatlab}

\shadowbox{\begin{minipage}[t]{1\columnwidth}%
\begin{itemize}
\item Name: \textbf{loadMatlab.m}
\item Loader number: \textbf{1}
\item Loads File Type: \textbf{{*}.mat}
\end{itemize}
\textbf{Function}: This Loader loads the raw signal from a Matlab
file which contains two vectors. It assumes ``v'' as the vector
with the discrete values for each ``t'' vector containing the corresponding
time values.%
\end{minipage}}


\subsection{loadCsv}

\shadowbox{\begin{minipage}[t]{1\columnwidth}%
\begin{itemize}
\item Name: \textbf{loadCsv.m}
\item Loader number: 2
\item Loads File Type: \textbf{{*}.csv}
\end{itemize}
\textbf{Function}: This Loader loads the signal from a CSV file which
contains the discrete values for each point of time. 

\textbf{Note}: If you use this Loader you need to give a sample rate
in the beginning.%
\end{minipage}}


\section{Available Modules}

We differentiate between two kind of Modules:
\begin{itemize}
\item ``Modifier Modules'' are used to manipulate signals when the supervisor
calls them, its ``signal'' variable is overwritten and its old state
is lost. Modifier Modules can also change the way the signal is to
be interpreted. For example, the ``fourier'' module applies an fast
fourier transformation or inverse fast fourier transformation, thus
transforming the signal to another domain. This information will not
be saved, so the sequence of the modules is important.
\item ``Output Modules'' do not manipulate the signal, but display or
output its current state. 
\end{itemize}
The last Plot and the last processed Signal will be saved if you add
an array of zeroes in between the modules.


\subsection{delayFilter}

\shadowbox{\begin{minipage}[t]{1\columnwidth}%
\begin{itemize}
\item Name: \textbf{delayFilter.m}
\item Module number: \textbf{1}
\item Module type: \textbf{Modifier}
\item Arguments: \textbf{1}

\begin{itemize}
\item first argument: sample rate
\end{itemize}
\item Function: Does nothing and may be used to wait for other processes.\end{itemize}
%
\end{minipage}}


\subsection{simplePlot}

\shadowbox{\begin{minipage}[t]{1\columnwidth}%
\begin{itemize}
\item Name: \textbf{simplePlot.m}
\item Module number: \textbf{2}
\item Module type: \textbf{Output}
\item Arguments: 3

\begin{itemize}
\item first argument: type

\begin{itemize}
\item determines how the signal has to be interpreted
\item possible values:

\begin{itemize}
\item 0 - time domain
\item 1 - frequency domain
\end{itemize}
\end{itemize}
\item second argument: figure {[}1:n{]} determines in which figure the signal
is to be plotted 
\item third argument: sample rate 
\end{itemize}
\item Function: Plots a signal in the requested figure. It depends on the
argument 'type' if the Signal should be recognized as a funcion of
time or frequency.\end{itemize}
%
\end{minipage}}


\subsection{fourier}

\shadowbox{\begin{minipage}[t]{1\columnwidth}%
\begin{itemize}
\item Name: \textbf{fourier.m}
\item Module number: 4
\item Module type: \textbf{Modifier}
\item Arguments: \textbf{1}

\begin{itemize}
\item first argument: type

\begin{itemize}
\item determines what kind of transformation should be done
\item possible values:

\begin{itemize}
\item 0 - fast fourier transform
\item 1 - inverse fast fourier transform
\end{itemize}
\end{itemize}
\item second argument: sample rate 
\end{itemize}
\item Function: Applies a fast fourier transform or an inverse fast fourier
transform, depending on the argument ``type''.\end{itemize}
%
\end{minipage}}


\subsection{fourierBlocks}

\shadowbox{\begin{minipage}[t]{1\columnwidth}%
\begin{itemize}
\item Name: \textbf{fourierBlocks.m}
\item Module number: \textbf{4}
\item Module type: \textbf{Modifier}
\item Arguments: 2

\begin{itemize}
\item first argument: block length

\begin{itemize}
\item {[}1:duration of signal{]} determines the length (in samples) of the
blocks the signal will be divided into
\end{itemize}
\item second argument: sample rate
\end{itemize}
\item Function: Applies a fast fourier transform or an inverse fast fourier
transform, depending on the argument ``type''.\end{itemize}
%
\end{minipage}}


\subsection{cutout}

\shadowbox{\begin{minipage}[t]{1\columnwidth}%
\begin{itemize}
\item Name: \textbf{cutout.m}
\item Module number: \textbf{5}
\item Module type: \textbf{Modifier}
\item Arguments: 3

\begin{itemize}
\item first argument: start sample

\begin{itemize}
\item {[}1:startsample{]} determines the start sample of the signal which
will be cut out
\end{itemize}
\item second argument: end sample

\begin{itemize}
\item {[}1:endsample{]} determines the end sample of the signal which will
be cut out
\end{itemize}
\item third argument: sample rate
\end{itemize}
\item Function: If ``startsample'' is smaller than ``endsample'', all
samples between the two samples will be returned. If ``startsample''
is greater than ``endsample'', the function returns the samples
between startsample and the end of the input signal and the samples
between the beginning and endsample. If the two arguments are equal,
the sample at that position will be returned.\end{itemize}
%
\end{minipage}}


\subsection{passFilter}

\shadowbox{\begin{minipage}[t]{1\columnwidth}%
\begin{itemize}
\item Name: \textbf{passFilter.m}
\item Module number: \textbf{6}
\item Module type: \textbf{Modifier}
\item Arguments: 4

\begin{itemize}
\item first argument: type of filter

\begin{itemize}
\item 1 - lowpass
\item 2 - highpass
\item 3 - bandpass
\end{itemize}
\item second argument: first frequency

\begin{itemize}
\item limit frequency for low- or highpass, lower limit frequency for bandpass
\end{itemize}
\item third argument: second frequency

\begin{itemize}
\item higher limit frequency for bandpass (ignored for low- or highpass)
\end{itemize}
\item fourth argument: sample rate
\end{itemize}
\item Function: Applies a pass filter to the signal \end{itemize}
%
\end{minipage}}


\subsection{powerSpectrum}

\shadowbox{\begin{minipage}[t]{1\columnwidth}%
\begin{itemize}
\item Name: \textbf{powerSpectrum.m}
\item Module number: \textbf{7}
\item Module type: \textbf{Output}
\item Arguments: 1

\begin{itemize}
\item first argument: sample rate
\end{itemize}
\item Function: Provides the power spectrum as data in return and also displays
it
\end{itemize}
\textbf{Note:} This Module will not work with Octave.%
\end{minipage}}


\subsection{audioOutput}

\shadowbox{\begin{minipage}[t]{1\columnwidth}%
\begin{itemize}
\item Name: \textbf{audioOutput.m}
\item Module number: \textbf{8}
\item Module type: \textbf{Output}
\item Arguments: 1

\begin{itemize}
\item first argument: sample rate
\end{itemize}
\item Function: Outputs the signal at the PC speaker (or at least tries
to)\end{itemize}
%
\end{minipage}}


\subsection{resampling}

\shadowbox{\begin{minipage}[t]{1\columnwidth}%
\begin{itemize}
\item Name: \textbf{resampling.m}
\item Module number: \textbf{9}
\item Module type: \textbf{Modifier}
\item Arguments: 4

\begin{itemize}
\item first argument: P (interpolation factor)
\item second argument: Q (decimation factor)
\item third argument: sample rate
\end{itemize}
\item Function: resamples the signal by the given factors\end{itemize}
%
\end{minipage}}


\subsection{digitalMix}

\shadowbox{\begin{minipage}[t]{1\columnwidth}%
\begin{itemize}
\item Name: \textbf{resampling.m}
\item Module number: \textbf{10}
\item Module type: \textbf{Modifier}
\item Arguments: 3

\begin{itemize}
\item first argument: parameter direction

\begin{itemize}
\item 0 - upstanding
\item 1 - downstanding
\end{itemize}
\item second argument: ``distance'' in Hz
\item third argument: sample Rate
\end{itemize}
\item Function: Mixes the signals\end{itemize}
%
\end{minipage}}


\subsection{correlation}

\shadowbox{\begin{minipage}[t]{1\columnwidth}%
\begin{itemize}
\item Name: \textbf{correlation.m}
\item Module number: \textbf{11}
\item Module type: \textbf{Modifier}
\item Arguments: 2

\begin{itemize}
\item first argument: length of the incoming signal
\item second argument: incoming signal
\end{itemize}
\end{itemize}
Yet it is not supported to provide any Arguments and only the signal
correlated with itself can be calculated. This will be added later.
\begin{itemize}
\item Function: Correlates two signals with each other\end{itemize}
%
\end{minipage}}


\subsection{plotIQ}

\shadowbox{\begin{minipage}[t]{1\columnwidth}%
\begin{itemize}
\item Name: \textbf{plotIQ.m}
\item Module number: \textbf{12}
\item Module type: \textbf{Output}
\item Arguments: 2

\begin{itemize}
\item first argument: type of plot
\item second argument: sample rate
\end{itemize}
\item Function: Generates an IQ-Plot of the given signal.\end{itemize}
%
\end{minipage}}


\section{Interface for Lessons}

We also created an interface (``webdemo'') for lessons so the programm
can be used in a ``quick and easy'' access. It is located at

\begin{center}
\textbf{http://webdemo.inue.uni-stuttgart.de/webdemos\_mgauger/06\_teamarbeit/visualizeSignal/index.php}
\par\end{center}

For this webdemo we simplified the program to fit it into the interface
and created a connection between the demo and the main program. The
User is only capable of adding a mixture of given filters though the
demo. Furthermore we added the possibility to upload your own signal
or use a predefined signal. 

Restrictions for the Fileupload are:
\begin{itemize}
\item Samplerate is known
\item CSV-File
\item File is not larger than 2MB
\end{itemize}
Using the complete Program you would be able to apply hundreds of
filters after each other, save the states as files or display more
than one plot at a time. To keep it simple we reduced it to the following
filters
\begin{itemize}
\item Pass-Filter (Low-/High-/Bandpass)
\item TBD
\end{itemize}
Possible predefined signals to chose are: 
\begin{itemize}
\item An Wireless Signal (Channel 1)
\item TBD
\end{itemize}
For output you can choose between:
\begin{itemize}
\item time domain
\item frequency domain
\item IQ demodulation.
\end{itemize}

\subsection{Usage}
\begin{enumerate}
\item Decide if you want to get the Output as time or frequency domain or
as IQ demodulation
\item Decide if you want to use a predefined Signal. If yes, keep the Box
checked and choose from the dropdown. If you want to use your own
Signal, remove the checked Box and get ``Choose File'' to get a
File from your own PC. Please note: You need to know the Samplerate
and the CSV-File is not larger than 2MB.
\item Check the filters you want to use

\begin{enumerate}
\item Pass-Filter


If you want to use a Pass-Filter chose which one you want to use.
Insert the border frequencies into the boxes in Hz.

\end{enumerate}
\item TBD\end{enumerate}

\end{document}
